<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>InstaCopy - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-4">InstaCopy</h1>

        <div class="card shadow-sm mb-5">
            <div class="card-body">
                <form th:action="@{/post}" method="post" class="row g-3">
                    <div class="col-md-5">
                        <input type="text" name="imageUrl" class="form-control" placeholder="ÁîªÂÉè„ÅÆURL„ÇíÂÖ•Âäõ" required>
                    </div>
                    <div class="col-md-5">
                        <input type="text" name="comment" class="form-control" placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ" required>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-primary w-100">ÊäïÁ®ø</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-3 g-4">
            <div class="col" th:each="post : ${posts}">
                <div class="card h-100 shadow-sm">
                    <img th:src="${post.imageUrl}" class="card-img-top" alt="post image" style="height: 250px; object-fit: cover;">
                    <div class="card-body">
                        <p class="card-text" th:text="${post.comment}"></p>
                        <small class="text-muted" th:text="${#temporals.format(post.createdAt, 'yyyy/MM/dd HH:mm')}"></small>
                        
						<div class="mt-3 d-flex justify-content-between align-items-center">
						    <a th:href="@{/post/edit/{id}(id=${post.id})}" class="btn btn-sm btn-outline-secondary">Á∑®ÈõÜ</a>

						    <form th:action="@{/post/{id}/like(id=${post.id})}" method="post" style="display: inline;">
						        <button type="submit" class="btn btn-sm btn-outline-primary">
						            üëç <span th:text="${post.likesCount}">0</span>
						        </button>
						    </form>

						    <form th:action="@{/post/delete/{id}(id=${post.id})}" method="post" onsubmit="return confirm('„Éû„Ç∏„ÅßÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')">
						        <button type="submit" class="btn btn-sm btn-outline-danger">ÂâäÈô§</button>
						    </form>
						</div>
                        </div>
                    </div>
                </div>
            </div> 
			</div>
			
    </div>
</body>
</html>